@model DeliveryDost.Web.ViewModels.Complaint.ComplaintListViewModel
@{ ViewData["Title"] = "My Complaints"; }

<div class="page-header">
    <div class="d-flex justify-content-between align-items-center">
        <div>
            <h1 class="page-title"><i class="bi bi-exclamation-circle me-2"></i>My Complaints</h1>
            <p class="page-subtitle">Track and manage your filed complaints</p>
        </div>
    </div>
</div>

<div class="card mb-4">
    <div class="card-body">
        <form method="get" class="row g-3">
            <div class="col-md-4">
                <select name="status" class="form-select" asp-items="@(new SelectList(DeliveryDost.Web.ViewModels.Complaint.ComplaintListViewModel.StatusOptions, "Value", "Text", Model.StatusFilter))"></select>
            </div>
            <div class="col-md-4">
                <select name="category" class="form-select">
                    <option value="">All Categories</option>
                    <option value="DAMAGE">Package Damage</option>
                    <option value="THEFT">Theft/Missing</option>
                    <option value="DELAY">Delay</option>
                    <option value="BEHAVIOR">Behavior</option>
                </select>
            </div>
            <div class="col-md-4">
                <button type="submit" class="btn btn-primary w-100"><i class="bi bi-funnel me-1"></i>Filter</button>
            </div>
        </form>
    </div>
</div>

<div class="card">
    <div class="card-body p-0">
        @if (Model.Complaints.Any())
        {
            <div class="table-responsive">
                <table class="table table-hover mb-0">
                    <thead class="table-light">
                        <tr><th>Complaint #</th><th>Category</th><th>Subject</th><th>Status</th><th>Severity</th><th>Date</th><th></th></tr>
                    </thead>
                    <tbody>
                        @foreach (var c in Model.Complaints)
                        {
                            <tr>
                                <td><strong>@c.ComplaintNumber</strong></td>
                                <td>@c.Category</td>
                                <td>@c.Subject</td>
                                <td><span class="badge @c.StatusBadgeClass">@c.Status</span></td>
                                <td><span class="badge @c.SeverityBadgeClass">@c.Severity</span></td>
                                <td><small>@c.CreatedAt.ToString("dd MMM yyyy")</small></td>
                                <td><a asp-action="Details" asp-route-id="@c.Id" class="btn btn-sm btn-outline-primary"><i class="bi bi-eye"></i></a></td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
        else
        {
            <div class="text-center py-5">
                <i class="bi bi-check-circle display-1 text-success mb-3"></i>
                <h5>No Complaints</h5>
                <p class="text-muted">You haven't filed any complaints.</p>
            </div>
        }
    </div>
</div>
