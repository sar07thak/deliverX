@model DeliveryDost.Web.ViewModels.Dpcm.DpcmRegistrationViewModel

<h4 class="mb-4"><i class="bi bi-file-earmark-check me-2"></i>KYC Documents</h4>
<p class="text-muted mb-4">Verify your identity to start earning</p>

<form action="/Dpcm/CompleteRegistration" method="post" novalidate>
    @Html.AntiForgeryToken()
    <input type="hidden" name="CurrentStep" value="3" />

    <div class="mb-4">
        <h5><i class="bi bi-credit-card me-2"></i>PAN Card Verification</h5>
        <hr />

        <div class="row">
            <div class="col-md-6">
                <div class="mb-3">
                    <label class="form-label">PAN Number <span class="text-danger">*</span></label>
                    <input type="text" name="KycDocuments.PAN" value="@Model.KycDocuments.PAN" class="form-control" placeholder="ABCDE1234F" maxlength="10" id="panInput" style="text-transform: uppercase;" required />
                    <small class="text-muted">Format: 5 letters + 4 digits + 1 letter</small>
                </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                    <label class="form-label">Name as per PAN</label>
                    <input type="text" name="KycDocuments.NameAsPerPan" value="@Model.KycDocuments.NameAsPerPan" class="form-control" placeholder="Name exactly as on PAN" />
                </div>
            </div>
        </div>
    </div>

    <div class="mb-4">
        <h5><i class="bi bi-person-badge me-2"></i>Aadhaar Verification (Optional)</h5>
        <hr />

        <div class="row">
            <div class="col-md-4">
                <div class="mb-3">
                    <label class="form-label">Aadhaar Last 4 Digits</label>
                    <input type="text" name="KycDocuments.AadhaarLast4" value="@Model.KycDocuments.AadhaarLast4" class="form-control" placeholder="Last 4 digits" maxlength="4" id="aadhaarInput" />
                </div>
            </div>
        </div>

        <p class="text-muted small">
            Aadhaar verification is optional for DPCM but helps in faster approval.
        </p>
    </div>

    <div class="alert alert-success">
        <i class="bi bi-check-circle me-2"></i>
        <strong>Almost done!</strong> After completing registration, you'll receive your unique referral code to start onboarding delivery partners.
    </div>

    <div class="d-flex justify-content-between mt-4 pt-3 border-top">
        <a href="/Dpcm/GoToStep?step=2" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left me-1"></i> Back
        </a>
        <button type="submit" class="btn btn-success btn-lg">
            <i class="bi bi-check-circle me-1"></i> Complete Registration
        </button>
    </div>
</form>

<script>
    document.getElementById('panInput').addEventListener('input', function(e) {
        e.target.value = e.target.value.toUpperCase();
    });

    document.getElementById('aadhaarInput').addEventListener('input', function(e) {
        e.target.value = e.target.value.replace(/[^0-9]/g, '');
    });
</script>
